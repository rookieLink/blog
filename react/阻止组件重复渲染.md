#### 阻止组件重复渲染

#### React.PureComponent

```js
import React,{PureComponent} from 'react';
export default class ComponentSon extends PureComponent{
    render(){
        console.log('PureComponent rendered : ' + Date.now());
        const msg = this.props.sonMsg;
        return (
            <div> {msg}</div>
        )
    }
}
```



此方法用于class组件性能优化使用，继承至该类的组件，只有在每次传入的props发生了变化时才会进行重新渲染，这个变化在这里使用的是浅比较，对于基本类型不会出什么问题，如果传入的props是一个引用类型，地址虽然没变，但是内容可能变了，所以此时的浅比较就会导致渲染bug，这里要想办法避免这种情况，一种比较好的办法是使用immutable来实现，具体来说要让这props是个不可便值，比如对于引用类型每次都使用object.assign来复制一个新值。

#### React.memo

```js
import React,{memo} from 'react';

 const MemoSon =  memo(function Son(props){
    console.log('MemoSon rendered : ' + Date.now());
    return (
        <div>{props.val}</div>
    )
})
export default MemoSon;

```

该方法是用来包装函数组件的，默认情况下也是只对props做浅比较，如果要控制对比过程，则可以传入自定义的比较函数。

```js
function MyComponent(props) {
  /* 使用 props 渲染 */
}
function areEqual(prevProps, nextProps) {
  /*
  如果把 nextProps 传入 render 方法的返回结果与
  将 prevProps 传入 render 方法的返回结果一致则返回 true，
  否则返回 false
  */
}
export default React.memo(MyComponent, areEqual);

```

