
#### 红黑树
红黑树可以解决极端情况下二叉树退化成链表的问题
#### 平衡二叉树
严格定义：二叉树中任意一个节点的左右子树的高度相差不能大于一（非完全二叉树也有可能是平衡二叉树）

红黑树满足这样几个要求：
- 1、根节点是黑色的
- 2、每个叶子节点都是黑色的空节点，也就是说叶子结点不存储数据
- 3、任何相邻的节点不能同时为红色，也就是说，红色节点是被黑色节点隔开的
- 4、每个节点，从该节点到达其叶子节点的所有路径，都包含相同数目的黑色节点

##### 优缺点
AVL 树是一种高度平衡的二叉树，所以查找的效率非常高，但是，有利就有弊，AVL 树为了维持这种高度的平衡，就要付出更多的代价。每次插入、删除都要做调整，就比较复杂、耗时。所以，对于有频繁的插入、删除操作的数据集合，使用 AVL 树的代价就有点高了。红黑树只是做到了近似平衡，并不是严格的平衡，所以在维护平衡的成本上，要比 AVL 树要低。

如何构建红黑树：  
为了实现上面的这种红黑树的要求，在删除和插入的过程中，第三、第四点的要求可能会被破坏，而我们要平衡这种破坏，实际上是要把第三、第四点恢复

左旋、右旋的方式

红黑树规定：插入的节点必须是红色的，而且，二叉查找树中新插入的节点都是放在叶子节点上：
- 1、如果插入节点的父节点是黑色的，那我们什么都不用做，它仍然满足红黑树的定义
- 2、如果插入的节点是根节点，那我们直接改变它的颜色，把他变成黑色的就可以了  
除此之外，其他情况都会违背红黑树的定义，所以我们要进行调整，调整的过程包含两种基本操作：左右旋转和改变颜色

#### 红黑树的插入操作：
##### case1：如果关注节点是 a，它的叔叔节点 d 是红色：  
- 将关注节点 a 的父节点 b、叔叔节点 d 的颜色都设置成黑色；
- 将关注节点 a 的祖父节点 c 的颜色设置成红色；
- 关注节点变成 a 的祖父节点 c；

##### case2：如果关注节点是 a，它的叔叔节点 d 是黑色，关注节点 a 是其父节点 b 的右子节点：  
- 关注节点变成节点 a 的父节点 b；
- 围绕新的关注节点b 左旋；

##### case3：如果关注节点是 a，它的叔叔节点 d 是黑色，关注节点 a 是其父节点 b 的左子节点：  
- 围绕关注节点 a 的祖父节点 c 右旋；
- 将关注节点 a 的父节点 b、兄弟节点 c 的颜色互换。

#### 删除操作：
##### case1：如果要删除的节点是a，它只有一个子节点b，依次进行下面的操作：
- 删除节点 a，并且把节点 b 替换到节点 a 的位置，这一部分操作跟普通的二叉查找树的删除操作一样；
- 节点 a 只能是黑色，节点 b 也只能是红色，其他情况均不符合红黑树的定义。这种情况下，我们把节点 b 改为黑色；
- 调整结束，不需要进行二次调整。
##### case2： 如果要删除的节点a有两个非空子节点，并且它的后继节点就是节点a的右子节点：
- 如果节点 a 的后继节点就是右子节点 c，那右子节点 c 肯定没有左子树。我们把节点 a 删除，并且将节点 c 替换到节点 a 的位置
- 然后把节点 c 的颜色设置为跟节点 a 相同的颜色；
- 如果节点 c 是黑色，为了不违反红黑树的最后一条定义，我们给节点 c 的右子节点 d 多加一个黑色，这个时候节点 d 就成了“红 - 黑”或者“黑 - 黑”；
- 这个时候，关注节点变成了节点 d，第二步的调整操作就会针对关注节点来做。

针对关注节点进行二次调整：
#### CASE 1：如果关注节点是 a，它的兄弟节点 c 是红色的，我们就依次进行下面的操作：
- 围绕关注节点 a 的父节点 b 左旋；
- 关注节点 a 的父节点 b 和祖父节点 c 交换颜色；
- 关注节点不变；
- 继续从四种情况中选择适合的规则来调整。

#### CASE 2：如果关注节点是 a，它的兄弟节点 c 是黑色的，并且节点 c 的左右子节点 d、e 都是黑色的，我们就依次进行下面的操作：
- 将关注节点 a 的兄弟节点 c 的颜色变成红色；
- 从关注节点 a 中去掉一个黑色，这个时候节点 a 就是单纯的红色或者黑色；
- 给关注节点 a 的父节点 b 添加一个黑色，这个时候节点 b 就变成了“红 - 黑”或者“黑 - 黑”；
- 关注节点从 a 变成其父节点 b；继续从四种情况中选择符合的规则来调整。

#### CASE 3：如果关注节点是 a，它的兄弟节点 c 是黑色，c 的左子节点 d 是红色，c 的右子节点 e 是黑色，我们就依次进行下面的操作：
- 围绕关注节点 a 的兄弟节点 c 右旋；
- 节点 c 和节点 d 交换颜色；关注节点不变；
- 跳转到 CASE 4，继续调整。

#### CASE 4：如果关注节点 a 的兄弟节点 c 是黑色的，并且 c 的右子节点是红色的，我们就依次进行下面的操作：
- 围绕关注节点 a 的父节点 b 左旋；
- 将关注节点 a 的兄弟节点 c 的颜色，跟关注节点 a 的父节点 b 设置成相同的颜色；
- 将关注节点 a 的父节点 b 的颜色设置为黑色；
- 从关注节点 a 中去掉一个黑色，节点 a 就变成了单纯的红色或者黑色；
- 将关注节点 a 的叔叔节点 e 设置为黑色；调整结束。